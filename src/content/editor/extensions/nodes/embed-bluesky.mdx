---
title: Embed Bluesky extension
tags:
  - type: image
    src: https://img.shields.io/npm/v/@tiptap/extension-embed-bluesky?label=version
    url: https://www.npmjs.com/package/@tiptap/extension-embed-bluesky
    label: Version
  - type: image
    src: https://img.shields.io/npm/dm/@tiptap/extension-embed-bluesky.svg
    url: https://npmcharts.com/compare/@tiptap/extension-embed-bluesky?minimal=true
    label: Downloads
extension:
  name: Embed Bluesky
  link: https://github.com/ueberdosis/tiptap/tree/main/packages/extension-embed-bluesky
  description: Easily embed Bluesky posts into your documents.
  type: node
  icon: Share2
meta:
  title: Embed Bluesky extension | Tiptap Editor Docs
  description: Use the Embed Bluesky extension in Tiptap to easily embed Bluesky posts in your documents. Learn more in our docs!
  category: Editor
---

import { CodeDemo } from '@/components/CodeDemo'
import { Callout } from '@/components/ui/Callout'

This extension adds the ability to embed Bluesky posts into your document. The extension leverages the Bluesky public API to resolve post metadata and render embeds using the official Bluesky embed script.

<CodeDemo path="/Nodes/EmbedBluesky" />

<Callout title="Collaborative-First Design" variant="info">
  When multiple users are editing collaboratively, only the user who inserted the embed fetches
  metadata from the Bluesky API. Other collaborators will use the cached metadata, reducing API
  requests and improving performance.
</Callout>

## Install

```bash
npm install @tiptap/extension-embed-bluesky
```

## Settings

### colorMode

Controls the color theme of the embedded post.

Default: `light`

```js
EmbedBluesky.configure({
  colorMode: 'dark',
})
```

Supported values: `light` or `dark`

### loadingHTML

Customize the HTML displayed while the embed is loading. Can be a string or a function.

Default: `'<div class="bluesky-loading"></div>'`

```js
// As a string
EmbedBluesky.configure({
  loadingHTML: '<div class="spinner">Loading...</div>',
})

// Or as a function for more control
EmbedBluesky.configure({
  loadingHTML: () => `<div class="spinner"><span></span></div>`,
})
```

### onError

Custom error handler called when embed resolution fails.

Default: `null`

```js
EmbedBluesky.configure({
  onError: (error, url) => {
    console.warn(`Failed to load Bluesky post from ${url}:`, error.message)
    return 'Failed to load post'
  },
})
```

## Usage

### Insert via Command

Use the `setEmbedBluesky` command to insert a Bluesky embed by URL:

```js
editor
  .chain()
  .focus()
  .setEmbedBluesky({ src: 'https://bsky.app/profile/user.bsky.social/post/3m7bl6h22qk26' })
  .run()
```

### Update with Resolved Metadata

After metadata is resolved, the embed is automatically updated. You can also manually update it using the `setEmbedBlueskeyResolved` command:

```js
editor
  .chain()
  .focus()
  .setEmbedBlueskeyResolved({
    uri: 'at://did:plc:xxxx/app.bsky.feed.post/postid',
    cid: 'bafy...',
    handle: 'user.bsky.social',
    postId: 'postid',
    colorMode: 'dark',
  })
  .run()
```

## URL Format

The extension expects standard Bluesky profile URLs:

```
https://bsky.app/profile/[handle]/post/[post-id]
```

### Valid Examples

- `https://bsky.app/profile/user.bsky.social/post/3m7bl6h22qk26`
- `https://bsky.app/profile/john.doe/post/abc123xyz`

### Query Parameters

Query parameters are supported and preserved:

```
https://bsky.app/profile/user.bsky.social/post/3m7bl6h22qk26?ref=tiptap
```

## API Resolution

When an embed URL is pasted, the extension automatically:

1. Validates the URL format
2. Resolves the user handle to their DID (Decentralized Identifier)
3. Fetches the post metadata including URI and CID
4. Renders the embed using the official Bluesky embed script

All metadata is cached in the document. Other collaborators will see the resolved embed without making additional API requests.

## Paste Handler

Paste a Bluesky URL directly into your editor to automatically insert an embed:

```
https://bsky.app/profile/user.bsky.social/post/3m7bl6h22qk26
```

## Styling

The embed nodes include the following data attributes for custom styling:

- `data-state` - Current state: `loading`, `resolving`, `resolved`, or `error`
- `data-color-mode` - The color theme: `light` or `dark`

### Selection Styling

Selected embed nodes include the `ProseMirror-selectednode` class for custom selection styling:

```css
.ProseMirror .bluesky-embed.ProseMirror-selectednode {
  outline: 3px solid #8b5cf6;
  outline-offset: 2px;
}
```

### Loading State

Customize the appearance while posts are loading:

```css
.bluesky-embed[data-state="loading"] {
  background: #f0f0f0;
  border-radius: 8px;
  padding: 16px;
}
```

### Error State

Style error states with custom feedback:

```css
.bluesky-embed[data-state="error"] {
  background: #fee2e2;
  border: 1px solid #fca5a5;
  padding: 16px;
  border-radius: 8px;
}
```
