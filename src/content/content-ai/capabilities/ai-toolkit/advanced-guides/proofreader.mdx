---
title: Build a proofreader with the AI Toolkit
meta:
  title: Build a proofreader with the AI Toolkit | Tiptap Content AI
  description: Use the AI Toolkit to build a proofreader that detects and corrects grammar and spelling errors in your documents.
  category: Content AI
---

import { Callout } from '@/components/ui/Callout'
import { CodeDemo } from '@/components/CodeDemo'
import { Requirements, RequirementItem } from '@/components/Requirements'

<Requirements>
  <RequirementItem label="1. Get access">
      Access the AI Toolkit extension by purchasing the paid AI Toolkit add-on. <a href="https://tiptap.dev/contact-sales?form=ai-toolkit">Contact our team</a>.
  </RequirementItem>
  <RequirementItem label="2. Access the private registry">
    The AI Toolkit extension is published in Tiptap&apos;s private npm registry. Authenticate to
    Tiptap&apos;s private npm registry by following the [setup guide](/guides/pro-extensions).
  </RequirementItem>
  <RequirementItem label="3. Install the extension">
    Install the extension from the private registry using npm or your preferred package manager.
  </RequirementItem>
</Requirements>

Build a proofreader that detects and corrects grammar and spelling errors in your Tiptap documents using AI.

<CodeDemo isLarge path="" isScrollable src="https://ai-toolkit-demos.vercel.app/proofreader" />

See the [source code on GitHub](https://github.com/ueberdosis/ai-toolkit-demos).

## Tech stack

- [React](https://react.dev/) + [Next.js](https://nextjs.org/)
- [AI SDK by Vercel](https://ai-sdk.dev/) + [OpenAI](https://openai.com/) models
- Tiptap AI Toolkit

## Project overview

This demo uses the AI Toolkit's `setHtmlSuggestions()` method with streaming to provide real-time grammar checking. As the AI finds corrections, they are immediately highlighted in the editor, creating a responsive user experience. Users can then accept or reject suggestions individually or all at once.

## Installation

Create a [Next.js](https://nextjs.org/) project:

```bash
npx create-next-app@latest proofreader
```

Install the core Tiptap packages and the [Vercel AI SDK](https://ai-sdk.dev/) for OpenAI:

```bash
npm install @tiptap/react @tiptap/starter-kit ai @ai-sdk/react @ai-sdk/openai zod
```

Install the Tiptap AI Toolkit:

<Callout title="Pro package" variant="hint">
  The AI Toolkit is a pro package. Before installation, set up access to the private NPM registry by
  following the [private registry guide](/guides/pro-extensions).
</Callout>

```bash
npm install @tiptap-pro/ai-toolkit
```

## Server setup

Create an API endpoint that uses the [Vercel AI SDK](https://ai-sdk.dev/) to call the OpenAI model for grammar checking. The endpoint streams corrections as they're generated, allowing for real-time display.

```ts
// app/api/grammar-check-changes/route.ts
import { openai } from '@ai-sdk/openai'
import { streamObject } from 'ai'
import { z } from 'zod'

export async function POST(req: Request) {
  const { html } = await req.json()

  const result = streamObject({
    model: openai('gpt-4o-mini'),
    prompt: `Fix all spelling and grammar errors in the HTML below. Return a list of specific changes that need to be made.

For each error found:
- Provide ONLY the exact text that needs to be changed, not the entire sentence
- Example: If "I didn't knew" needs to become "I didn't know", only provide delete: "knew" and insert: "know"
- Both "insert" and "delete" fields MUST contain non-empty text
- Each change should be minimal and specific

HTML to correct:
${html}`,
    schema: z.object({
      changes: z.array(
        z.object({
          insert: z.string().describe('The corrected text to insert'),
          delete: z.string().describe('The incorrect text to delete'),
        }),
      ),
    }),
  })

  return result.toTextStreamResponse()
}
```

## Client setup

Create a React component that renders the editor and handles grammar checking. The component uses Vercel AI SDK's `useObject` hook to handle streaming, and the AI Toolkit's `setHtmlSuggestions()` method to display corrections in real-time.

```tsx
// app/proofreader/page.tsx
'use client'

import { experimental_useObject as useObject } from '@ai-sdk/react'
import { EditorContent, useEditor } from '@tiptap/react'
import StarterKit from '@tiptap/starter-kit'
import { AiToolkit, getAiToolkit } from '@tiptap-pro/ai-toolkit'
import { useEffect, useRef, useState } from 'react'
import { z } from 'zod'

const INITIAL_CONTENT = `<h1>Grammar Check Demo</h1><p>This is a excelent editor for writng documents. It have many feature's that makes it very powerfull.</p>`

// Helper: Filter out invalid partial changes during streaming
function filterValidChanges(changes: Array<{ insert?: string; delete?: string } | undefined>) {
  return changes.filter(
    (change): change is { insert: string; delete: string } =>
      !!change && !!change.insert?.trim() && !!change.delete?.trim(),
  )
}

export default function Page() {
  const editor = useEditor({
    immediatelyRender: false,
    extensions: [StarterKit, AiToolkit],
    content: INITIAL_CONTENT,
  })

  const editorRef = useRef(editor)
  editorRef.current = editor

  const [isReviewing, setIsReviewing] = useState(false)

  const { submit, isLoading, object } = useObject({
    api: '/api/grammar-check-changes',
    schema: z.object({
      changes: z.array(
        z.object({
          insert: z.string(),
          delete: z.string(),
        }),
      ),
    }),
    onFinish: () => {
      setIsReviewing(true)
    },
  })

  // Apply streaming suggestions in real-time as they arrive
  useEffect(() => {
    const currentEditor = editorRef.current
    if (!currentEditor || !object?.changes) return

    const validChanges = filterValidChanges(object.changes)
    if (validChanges.length > 0) {
      const toolkit = getAiToolkit(currentEditor)
      toolkit.setHtmlSuggestions({ changes: validChanges })
    }
  }, [object?.changes])

  const checkGrammar = () => {
    const currentEditor = editorRef.current
    if (!currentEditor) return

    const htmlToCheck = currentEditor.getHTML()
    submit({ html: htmlToCheck })
  }

  if (!editor) return null

  return (
    <div>
      <EditorContent editor={editor} />

      {!isReviewing && (
        <button onClick={checkGrammar} disabled={isLoading}>
          {isLoading ? 'Checking...' : 'Check Grammar'}
        </button>
      )}

      {isReviewing && (
        <div>
          <p>Corrections are highlighted in the document above.</p>
          <button
            onClick={() => {
              const toolkit = getAiToolkit(editor)
              toolkit.applyAllSuggestions()
              setIsReviewing(false)
            }}
          >
            Accept all
          </button>
          <button
            onClick={() => {
              const toolkit = getAiToolkit(editor)
              toolkit.setSuggestions([])
              setIsReviewing(false)
            }}
          >
            Reject all
          </button>
        </div>
      )}
    </div>
  )
}
```

## End result

With additional CSS styles, the result is a polished proofreader application with real-time grammar checking:

<CodeDemo isLarge path="" isScrollable src="https://ai-toolkit-demos.vercel.app/proofreader" />

See the [source code on GitHub](https://github.com/ueberdosis/ai-toolkit-demos).

## Alternative: Hash-based proofreading

For more precise control over corrections, you can use `getHtmlWithHashes()` and `proofreadHtml()`. This approach gives the AI specific node identifiers, enabling targeted corrections that won't affect unintended parts of the document.

### Server setup (hash-based)

```ts
// app/api/proofread/route.ts
import { openai } from '@ai-sdk/openai'
import { streamObject } from 'ai'
import { proofreadHtmlPrompt } from '@tiptap-pro/ai-toolkit-tool-definitions'
import { z } from 'zod'

export async function POST(req: Request) {
  const { nodesWithHashes } = await req.json()

  const result = streamObject({
    model: openai('gpt-4o-mini'),
    system: proofreadHtmlPrompt,
    prompt: JSON.stringify(nodesWithHashes),
    schema: z.object({
      operations: z.array(
        z.object({
          hash: z.string().describe('The 6-character hash of the node'),
          delete: z.string().describe('The text to find and remove'),
          insert: z.string().describe('The replacement text'),
        }),
      ),
    }),
  })

  return result.toTextStreamResponse()
}
```

### Client setup (hash-based)

```tsx
// app/proofreader-hashes/page.tsx
'use client'

import { experimental_useObject as useObject } from '@ai-sdk/react'
import { EditorContent, useEditor } from '@tiptap/react'
import StarterKit from '@tiptap/starter-kit'
import { AiToolkit, getAiToolkit } from '@tiptap-pro/ai-toolkit'
import { useEffect, useRef, useState } from 'react'
import { z } from 'zod'

const INITIAL_CONTENT = `<h1>Grammar Check Demo</h1><p>This is a excelent editor for writng documents. It have many feature's that makes it very powerfull.</p>`

// Helper: Filter out invalid partial operations during streaming
function filterValidOperations(
  operations: Array<{ hash?: string; delete?: string; insert?: string } | undefined>,
) {
  return operations.filter(
    (op): op is { hash: string; delete: string; insert: string } =>
      !!op && !!op.hash?.trim() && !!op.delete?.trim() && !!op.insert?.trim(),
  )
}

export default function Page() {
  const editor = useEditor({
    immediatelyRender: false,
    extensions: [StarterKit, AiToolkit],
    content: INITIAL_CONTENT,
  })

  const editorRef = useRef(editor)
  editorRef.current = editor

  const [isReviewing, setIsReviewing] = useState(false)

  const { submit, isLoading, object } = useObject({
    api: '/api/proofread',
    schema: z.object({
      operations: z.array(
        z.object({
          hash: z.string(),
          delete: z.string(),
          insert: z.string(),
        }),
      ),
    }),
    onFinish: () => {
      setIsReviewing(true)
    },
  })

  // Apply streaming operations in real-time as they arrive
  useEffect(() => {
    const currentEditor = editorRef.current
    if (!currentEditor || !object?.operations) return

    const validOperations = filterValidOperations(object.operations)
    if (validOperations.length > 0) {
      const toolkit = getAiToolkit(currentEditor)
      toolkit.proofreadHtml({
        operations: validOperations,
        reviewOptions: { mode: 'preview' },
      })
    }
  }, [object?.operations])

  const checkGrammar = () => {
    const currentEditor = editorRef.current
    if (!currentEditor) return

    const toolkit = getAiToolkit(currentEditor)
    const nodesWithHashes = toolkit.getHtmlWithHashes()
    submit({ nodesWithHashes })
  }

  if (!editor) return null

  return (
    <div>
      <EditorContent editor={editor} />

      {!isReviewing && (
        <button onClick={checkGrammar} disabled={isLoading}>
          {isLoading ? 'Checking...' : 'Check Grammar'}
        </button>
      )}

      {isReviewing && (
        <div>
          <p>Corrections are highlighted in the document above.</p>
          <button
            onClick={() => {
              const toolkit = getAiToolkit(editor)
              toolkit.applyAllSuggestions()
              setIsReviewing(false)
            }}
          >
            Accept all
          </button>
          <button
            onClick={() => {
              const toolkit = getAiToolkit(editor)
              toolkit.setSuggestions([])
              setIsReviewing(false)
            }}
          >
            Reject all
          </button>
        </div>
      )}
    </div>
  )
}
```

### Benefits of hash-based proofreading

- **Precise targeting**: Each correction targets a specific node, reducing the chance of unintended changes
- **Better streaming**: Operations can be applied incrementally as they arrive from the AI
- **Clearer AI context**: The AI sees exactly which node each piece of content belongs to
- **Built-in prompt**: Use `proofreadHtmlPrompt` from `@tiptap-pro/ai-toolkit-tool-definitions` for consistent AI formatting

## Related guides

- [Display suggestions](/content-ai/capabilities/ai-toolkit/primitives/display-suggestions#sethtmlsuggestions) - Learn more about the `setHtmlSuggestions()` method
- [proofreadHtml](/content-ai/capabilities/ai-toolkit/primitives/display-suggestions#proofreadhtml) - API reference for hash-based proofreading
- [getHtmlWithHashes](/content-ai/capabilities/ai-toolkit/primitives/read-the-document#gethtmlwithhashes) - Get document nodes with hash identifiers
- [Review changes](/content-ai/capabilities/ai-toolkit/guides/review-changes) - Build a review changes UI
- [AI engineering guide](/content-ai/capabilities/ai-toolkit/advanced-guides/ai-engineering) - Best practices for AI integration
