---
title: AI Toolkit Changelog
meta:
  title: AI Toolkit Changelog | Tiptap AI Toolkit
  description: Changelog for the @tiptap-pro/ai-toolkit package
  category: Content AI
---

# @tiptap-pro/ai-toolkit

## 3.0.0-alpha.60

### Patch Changes

- Fix bug in `editThreads` tool and Comments workflow where the thread was sometimes created in the wrong position.

## 3.0.0-alpha.59

### Minor Changes

- Add streaming support to `editThreads` tool with operation tracking. Operations are tracked by count in extension storage to prevent duplicate execution during streaming. Storage automatically resets when tool call ID changes.
- Add streaming support to the Comments workflow. Add `isStreaming` option to `editThreadsWorkflow` method. When `isStreaming` is true, operations are executed up to (but not including) the last operation. When false or undefined, all operations including the last one are executed. Operations are tracked to prevent duplicate execution during streaming, and storage automatically resets when workflow ID changes.

### Patch Changes

- Do not show trailing `<` characters when streaming HTML content.

## 3.0.0-alpha.58

### Major Changes

- In the return type of the `executeTool` and `streamTool` methods, the `output` property now returns a JSON object instead of a string. This facilitates logging and parsing the tool output.

### Minor Changes

- Add `smartInline` diff mode to `diffUtility`. This mode combines block-level and inline-level comparison for more efficient change detection: it first identifies changed blocks, then performs detailed inline diffing only within those blocks. This is useful for documents where only portions have changed, providing both efficiency and character-level precision.

## 3.0.0-alpha.57

### Major Changes

- **Breaking**: Refactor Tiptap edit implementation for improved efficiency and accuracy. The new implementation removes the `HashAttributeExtension` and enhances schema handling with better hash generation.
- **Breaking**: Rename `nodeRange` to `contentRange` in `tiptapRead` method return type for better clarity and consistency.
- **Breaking**: Rename `nodes` input property to `content` in workflow user prompts. This affects `tiptapEditWorkflow` and `editThreadsWorkflow`. Update your workflow calls to use `content` instead of `nodes`.

### Minor Changes

- Unify `selectableNodeTypes` handling across all Tiptap methods for consistency.
- Relocate `addHashesToDocument` utility to `tiptap-read` directory for improved organization.

### Patch Changes

- Fix bug in comments tools where comments would be inserted in the wrong places.
- Simplify hash generation in `addHashesToDocument` and `shortHash` utilities.
- Streamline selectable node handling in Tiptap edit functions.

## 3.0.0-alpha.56

### Patch Changes

- Update `getThreads` pagination to use an exclusive upper bound in `threadIndexRange`.

## 3.0.0-alpha.55

### Patch Changes

- Paginate `getThreads` tool output by thread index to respect chunk size limits.

## 3.0.0-alpha.54

### Patch Changes

- Fix 'range out of bounds' error that sometimes occurred when accepting or rejecting all suggestions.
- Fix bug where user feedback was not correct when accepting a change generated by the "Compare Documents" feature.

## 3.0.0-alpha.53

### Minor Changes

- Add `tiptapEditWorkflow` method. This method executes a workflow that allows the AI to edit the document with precise, efficient operations.
- Add `editThreadsWorkflow` method. This method executes a workflow that allows the AI to manage comments and threads in the document.
- Add `getThreads` method. This method retrieves all threads in the document with their comments and location information.

## 3.0.0-alpha.52

### Patch Changes

- Fix bug where the position of the other suggestions was not updated correctly when a suggestion was accepted or rejected.

## 3.0.0-alpha.51

### Major Changes

- **Breaking**: Change `editThreads` tool to use a new, more efficient format. The new format is faster, more efficient, uses fewer tokens, and avoids diff mismatch errors completely, significantly improving the accuracy of the tool.

## 3.0.0-alpha.50

### Major Changes

- Simplify the suggestions API by unifying regular suggestions and "Compare Documents" changes into a single set of methods.
- Remove `acceptChange`, `rejectChange`, and `rejectAllChanges` methods from the "Compare Documents" feature. Use `acceptSuggestion`, `rejectSuggestion`, `acceptAllSuggestions`, and `rejectAllSuggestions` instead. These methods now handle both regular suggestions and changes from the "Compare Documents" feature.
- Rename `applySuggestion` to `acceptSuggestion` and `applyAllSuggestions` to `acceptAllSuggestions` for clarity and consistency with the new `rejectSuggestion` and `rejectAllSuggestions` methods.

### Minor Changes

- Add `reviewMode` field to `Suggestion` interface. This field indicates whether a suggestion is in 'preview' mode (preview of a change before applying) or 'review' mode (review of a change that has already been made, allowing the user to undo it). The field is automatically set based on `reviewOptions.mode` when suggestions are created.
- Add `rejectSuggestion` and `rejectAllSuggestions` methods to reject suggestions without applying them. These methods return AI feedback about the rejected changes.
- Modify `acceptSuggestion` and `acceptAllSuggestions` methods to return `aiFeedback` property. The `aiFeedback` contains events with information about changes that were accepted or rejected by the user, including the deleted content, inserted content, and acceptance status. This feedback can be used to inform the AI about user preferences and improve future suggestions.

## 3.0.0-alpha.49

### Patch Changes

- Replace deprecated dependency `moize` with `micro-memoize`.
- Remove unused dependency `debounce`.

## 3.0.0-alpha.48

### Major Changes

- Requires upgrading to a version of these provider libraries that is equal or higher than:
  - `@tiptap-pro/ai-toolkit-tool-definitions@3.0.0-alpha.19`
- Removes `insertFragment` method because it is no longer used.
- Removes `getActiveNodeRange` and `setActiveNodeRange` methods because they are no longer used.

### Minor Changes

- Add `proofreaderWorkflow` method to the AI Toolkit. This method executes a workflow that allows the AI to proofread the document.
- Add `tiptapRead` method to the AI Toolkit. It reads the document in a format that allows the AI to make fast, efficient edits.

## 3.0.0-alpha.47

### Major Changes

- Add `tiptapEdit`, `tiptapRead`, and `tiptapReadSelection` tools and set them as default. Remove `readNodeRange`, `readSelection`, `insertContent` and `applyPatch` tools.

## 3.0.0-alpha.46

### Minor Changes

- Add `tiptapEdit`, `tiptapRead`, and `tiptapReadSelection` tools that make edits faster and more efficient. These tools are experimental and opt-in.

## 3.0.0-alpha.45

### Minor Changes

- Add block-level diffing option to `diffUtility` method. The new `mode` option allows comparing documents at the block level by setting `mode: 'block'`, treating each top-level node as a single unit. This is useful when you only need to know which paragraphs, headings, or other block-level elements have changed, without character-level detail.

### Patch Changes

- Fix bug in `diffUtility` where nearby changes in different top-level nodes would incorrectly get merged when using `changeMergeDistance`. Changes are now properly separated when they occur in different blocks, even if they are within the merge distance threshold.
- Fix bug in the `editThreads` tool where the thread would not be created if the document had not been read before creating the thread.
- In `startComparingDocuments` method, ensure that the other document has the same schema as the main document before comparing them.

## 3.0.0-alpha.44

### Minor Changes

- Add `setMarkdownSuggestions` method to display suggestions by comparing Markdown content with the current document. This method works similarly to `setHtmlSuggestions` but accepts Markdown input instead of HTML. Requires the Tiptap Markdown extension to be installed and configured.
- Add `getMarkdownRange` method to extract Markdown content from a specific document range. Requires the Tiptap Markdown extension to be installed and configured.

### Patch Changes

- Fix bug in `setHtmlSuggestions` and `setMarkdownSuggestions` where text replacements using the `changes` format would accidentally modify HTML tags. For example, replacing "a" with "an" would incorrectly turn `<a>` tags into `<an>` tags. The fix ensures that when the delete text doesn't contain HTML tag characters (`<` or `>`), replacements only occur in text content, not inside HTML tags.

## 3.0.0-alpha.43

### Patch Changes

- Fix error where decorations were not updated correctly when a collaborative transaction is applied.

## 3.0.0-alpha.42

### Patch Changes

- Fix error where decorations were not updated correctly when a collaborative transaction is applied.

## 3.0.0-alpha.41

### Major changes

- Replace `changeMergeDistance` option with `diffUtilityConfig`, to provide more customization options for the document comparison utility.

### Minor Changes

- Add `diffUtilityConfig` option to `compareDocuments` format in `setSuggestions` method. This allows configuring the document comparison utility.
- Add `diffAttributes` option to `displayOptions` of `Suggestion` type to allow customizing the attributes of the diff decoration.

## 3.0.0-alpha.40

### Patch Changes

- Fix bug that caused the AI to read the incorrect content of the document after updating the document.

## 3.0.0-alpha.39

### Patch Changes

- Fix bug where new threads and comments were not created in the right position of the document.

## 3.0.0-alpha.38

### Patch Changes

- Fix bug where the `applyPatch` and `insertContent` tools would not work correctly when streaming.

## 3.0.0-alpha.37

### Major Changes

- New format for the `applyPatch` tool. Improves speed and accuracy significantly.
- Improved input/output format and tool definitions of all the built-in tools.
- Requires upgrading to a version of these provider libraries that is equal or higher than:
  - `@tiptap-pro/ai-toolkit-tool-definitions@3.0.0-alpha.11`
  - `@tiptap-pro/ai-toolkit-ai-sdk@3.0.0-alpha.14`
  - `@tiptap-pro/ai-toolkit-anthropic@3.0.0-alpha.6`
  - `@tiptap-pro/ai-toolkit-langchain@3.0.0-alpha.10`
  - `@tiptap-pro/ai-toolkit-openai@3.0.0-alpha.9`

## 3.0.0-alpha.36

### Major Changes

- Makes the insertContent tool independent of the format of the content, by renaming the "html" property to "content".
- Requires upgrading to a version of these provider libraries that is equal or higher than:
  - `@tiptap-pro/ai-toolkit-tool-definitions@3.0.0-alpha.10`
  - `@tiptap-pro/ai-toolkit-ai-sdk@3.0.0-alpha.13`
  - `@tiptap-pro/ai-toolkit-anthropic@3.0.0-alpha.5`
  - `@tiptap-pro/ai-toolkit-langchain@3.0.0-alpha.9`
  - `@tiptap-pro/ai-toolkit-openai@3.0.0-alpha.8`

### Patch Changes

- Fixes bug in insertContent tool where the activeNodeRange is not a valid value for the position.
- Fixes bug where the insertContent tool would cause the activeNodeRange to always reset to 0.
- Fix boundary errors and formatting loss in `setHtmlSuggestions`. Document boundaries now use `content.size` instead of `nodeSize - 1`, and HTML formatting (bold, italic, links) is preserved when applying suggestions.

## 3.0.0-alpha.35

### Patch Changes

- Fix bug where the `streamText` and `streamHtml` methods unnecessarily converted a ReadableStream to an AsyncIterable, making them slower than necessary.

## 3.0.0-alpha.34

### Minor Changes

- Add `changeMergeDistance` option to `diffUtility`, `startComparingDocuments`, `setSuggestions` (compareDocuments format), `setHtmlSuggestions`, and all edit methods' `reviewOptions`. This allows merging nearby changes when comparing documents by specifying the maximum distance (in document positions) between changes to merge them into a single change.
- Add `reviewOptions` parameter to `setHtmlSuggestions` method. Users can now customize suggestion display options (like `diffPosition`, `showAsDiff`, custom `renderDecorations`) and add custom metadata, following the same pattern as other edit methods.
- Fix range offset calculation in `setHtmlSuggestions`. Suggestions now correctly highlight the exact text when no `range` parameter is provided, fixing a bug where positions were incorrectly shifted by -1.
- Fix default `diffPosition` in `setHtmlSuggestions` to use 'after' instead of 'before', and make it configurable through `reviewOptions.displayOptions.diffPosition`.

## 3.0.0-alpha.33

### Minor Changes

- Add `getSelectedSuggestion` method to get the currently selected suggestion.

## 3.0.0-alpha.32

### Minor Changes

- Add `setActiveSelection` method to set the active selection. When set, this range overrides the current editor selection in tools like `readSelection`.

## 3.0.0-alpha.31

### Minor Changes

- Add `commentsOptions` property to `executeTool` and `streamTool` methods. This allows passing custom data to thread and comment operations. The `data` property is used for thread data (in `editor.commands.setThread`), while `commentData` is used for comment data (in `editor.commands.createComment` and `editor.commands.setThread`).

## 3.0.0-alpha.30

### Patch Changes

- Fix a bug where changes in node attributes were not being detected correctly.
- When comparing documents, ignore the changes made by the Unique ID extension.
- When comparing documents, ignore the changes made by the Comments extension.

## 3.0.0-alpha.29

### Minor Changes

- Add `setHtmlSuggestions` method to display suggestions by comparing HTML content with the current document

## 3.0.0-alpha.28

### Patch Changes

- Fix incorrect import in library code that caused bundler to fail.

## 3.0.0-alpha.27

### Patch Changes

- Fix issue in `createThread` operation where the thread was sometimes created in the wrong position.
- Improve error messages that the AI receives when a `createThread` operation fails.

## 3.0.0-alpha.26

### Major Changes

- Add new `editThreads` and `getThreads` tools for AI-powered comment and thread management
- Requires upgrading to a version of these provider libraries that is equal or higher than:
  - `@tiptap-pro/ai-toolkit-tool-definitions@3.0.0-alpha.9`
  - `@tiptap-pro/ai-toolkit-ai-sdk@3.0.0-alpha.12`
  - `@tiptap-pro/ai-toolkit-anthropic@3.0.0-alpha.4`
  - `@tiptap-pro/ai-toolkit-langchain@3.0.0-alpha.8`
  - `@tiptap-pro/ai-toolkit-openai@3.0.0-alpha.7`

## 3.0.0-alpha.25

### Patch Changes

- Fix issue (regression) in `applyPatch` tool where the last operation was not being parsed correctly when streaming. This caused the text to gradually disappear during streaming.

## 3.0.0-alpha.24

### Major Changes

- Rename `applyDiff` tool to `applyPatch`
- Rename `applyHtmlDiff` method to `applyHtmlPatch`.
- Improve format and tool definition of the `applyDiff` tool (now called `applyPatch`) so that the AI generates a list of patch operations. This improves accuracy (because the AI is not tempted to do unnecessary jumps) and reduces token usage significantly
- Requires upgrading to a version of these provider libraries that is equal or higher than:
  - `@tiptap-pro/ai-toolkit-tool-definitions@3.0.0-alpha.8`
  - `@tiptap-pro/ai-toolkit-ai-sdk@3.0.0-alpha.11`
  - `@tiptap-pro/ai-toolkit-langchain@3.0.0-alpha.7`
  - `@tiptap-pro/ai-toolkit-openai@3.0.0-alpha.6`
  - `@tiptap-pro/ai-toolkit-anthropic@3.0.0-alpha.3`

## 3.0.0-alpha.23

### Minor Changes

- Add `activeNodeRange` position to the `insertContent` tool to allow the AI to insert content at the active node range. This improves the accuracy of the edits when the `applyDiff` tool is disabled.
- Requires upgrading to a version of these provider libraries that is equal or higher than:
  - `@tiptap-pro/ai-toolkit-tool-definitions@3.0.0-alpha.7`
  - `@tiptap-pro/ai-toolkit-ai-sdk@3.0.0-alpha.10`
  - `@tiptap-pro/ai-toolkit-langchain@3.0.0-alpha.6`
  - `@tiptap-pro/ai-toolkit-openai@3.0.0-alpha.5`
  - `@tiptap-pro/ai-toolkit-anthropic@3.0.0-alpha.2`

## 3.0.0-alpha.22

### Minor Changes

- Add `addHtmlSchemaAwareness` method to the extension configuration to provide the schema awareness data of a custom Node or Mark extension.

## 3.0.0-alpha.21

### Patch Changes

- Fix issue where the detailed diff was shown during streaming, which caused the diff to constantly update. Now, the detailed diff is only shown when the streaming is finished.
- Fix issue that caused extra paragraphs to be inserted during streaming, at the beginning of the streamed content.

## 3.0.0-alpha.20

### Major Changes

- Rename `getSchemaAwareness` method to `getHtmlSchemaAwareness`
- Improve the prompt generated by the schema awareness methods to be more accurate for the AI models

## 3.0.0-alpha.19

### Minor Changes

- Experimental implementation of the AI Toolkit + Pages extension integration. Introduces the `readPage` tool.

## 3.0.0-alpha.18

### Patch Changes

- Make `streamHtml` and `streamText` methods return a promise that resolves when the stream is finished

## 3.0.0-alpha.17

### Major Changes

- Improve tool definitions of `readSelection` and `insertContent` tools to fix a bug where the AI inserts the content in the wrong place if the user changes the selection after the AI reads the selection.

### Patch Changes

- Fix issue in `streamHtml` and `streamText` methods where a `ReadableStream` was not accepted as a parameter

## 3.0.0-alpha.16

### Major Changes

- Renamed `detailedDiff` to `diffMode` in review options to control how to display the difference between the original and the modified content

## 3.0.0-alpha.15

### Major Changes

- Add `detailedDiff` option to review options to control whether to display the change as a detailed diff. Rename `showDiff` option to `detailedDiff` for clarity
- Add `detailedDiff` option to tool execution and streaming options to control whether to display the change as a detailed diff, and set it to `true` by default so that the changes are displayed as a detailed diff by default

## 3.0.0-alpha.14

### Major Changes

- Requires upgrading to a version of these provider libraries that is equal or higher than:
  - `@tiptap-pro/ai-toolkit-tool-definitions@3.0.0-alpha.4`
  - `@tiptap-pro/ai-toolkit-ai-sdk@3.0.0-alpha.7`
  - `@tiptap-pro/ai-toolkit-langchain@3.0.0-alpha.3`
  - `@tiptap-pro/ai-toolkit-openai@3.0.0-alpha.2`
- Remove `currentChunk` parameter and return value from the `executeTool` method
  - The `executeTool` method no longer accepts `currentChunk` parameter
  - The `executeTool` method no longer returns `currentChunk` field
- Add `getActiveNodeRange` method to get the active node range. The active node range is the range of top-level nodes that can be edited in the next tool call, it helps the AI make more precise edits when editing the document with the `applyDiff` tool. It replaces the `currentChunk` parameter.
- Add `setActiveNodeRange` method to set the active node range
- Remove tools `readFirstChunk`, `readNextChunk` and `readPreviousChunk`.
- Add `readNodeRange` tool. This tool allows the AI to read any range of top-level nodes in the document. It is much more flexible than the previous chunk-based reading tools.

### Minor Changes

- Add `streamTool` method to stream a tool call into the editor

## 3.0.0-alpha.13

### Minor Changes

- Add `metadata` option to review options to add custom metadata and properties to the suggestions that are generated during review mode
- Add `streamText` and `streamHtml` methods to stream text and HTML content into the editor

### Patch Changes

- Fix issue in `insertJson` where it did not support Tiptap JSON of a ProseMirror Fragment
- Fix issue in suggestions diff view where extra elements like paragraphs were displayed in the suggestion diff content

## 3.0.0-alpha.12

### Patch Changes

- Show a warning when `getAiToolkit` is called but the Editor does not have the AiToolkit extension
- Fix issue in `getJsonChunks` where the JSON chunks were not being returned in the correct format
- Improve `readFirstChunk` tool response format

## 3.0.0-alpha.11

### Patch Changes

- Fix issue in `diffUtility` where identical empty documents were considered different

## 3.0.0-alpha.10

### Major Changes

- Add `replaceDocumentWhereChanged` method to replace the entire document in an efficient way, so that not all the document is marked as replaced, but only the parts of the document that have changed
- Re-implement `applyHtmlDiff` and `rejectAllChanges` methods to use `replaceDocumentWhereChanged`

## 3.0.0-alpha.9

### Major Changes

- Add `rejectAllChanges` method to reject all changes when comparing documents in real-time

## 3.0.0-alpha.8

### Major Changes

- Add `acceptChange` and `rejectChange` methods to accept and reject changes when comparing documents in real-time
- Remove `applySuggestionToOtherDoc` method because it's equivalent to `acceptChange` but with a more confusing name

## 3.0.0-alpha.7

### Major Changes

- Improved chunk format: now it includes the range of the chunk in the document
- Improve accuracy of `getHtmlRange`, `getJsonRange`, and `getTextRange` methods when returning the chunk index

## 3.0.0-alpha.6

### Patch Changes

- Fix issue with incorrect import

## 3.0.0-alpha.5

### Minor Changes

- Add `applySuggestionToOtherDoc` method to apply a suggestion to the other document when comparing documents in real-time
- Ignore the debounce timeout on the first run of `startComparingDocuments` so that the suggestions show up immediately and the app feels responsive

## 3.0.0-alpha.4

### Major Changes

- Remove `needsReview` option from return type of `executeTool` and use `docChanged` instead
- The `docChanged` option is now `true` when the tool call modifies the document

## 3.0.0-alpha.3

### Minor Changes

- Add `needsReview` option to return type of `executeTool` to know when the tool call needs user review
- Add `applyAllSuggestions` method to apply all suggestions at once
- Improve error messages when tool calls fail

## 3.1.0-alpha.2

### Patch Changes

- Fix types of `input` parameter in the `executeTool` method parameters so that it is compatible with the AI SDK by Vercel

## 3.1.0-alpha.1

### Major changes

- Initial alpha release of the AI Toolkit
