---
title: Review changes
meta:
  title: Review Server AI Toolkit changes | Tiptap Content AI
  description: Display a diff UI to review changes made by the Server AI Toolkit before applying them.
  category: Content AI
---

import { Callout } from '@/components/ui/Callout'
import { Requirements, RequirementItem } from '@/components/Requirements'

<Requirements>
  <RequirementItem label="1. Server AI Toolkit">
    Set up the Server AI Toolkit by following the [AI agent chatbot
    guide](/content-ai/capabilities/server-ai-toolkit/agents/ai-agent-chatbot).
  </RequirementItem>
  <RequirementItem label="2. AI Toolkit extension">
    Install the client-side [AI Toolkit extension](/content-ai/capabilities/ai-toolkit/install) in
    your Tiptap editor.
  </RequirementItem>
</Requirements>

After the Server AI Toolkit edits a document on the server, you can display a review UI on the client so users can accept or reject the changes before they are applied.

This guide shows how to use the client-side AI Toolkit's `setSuggestions` method with the `compareDocuments` format to show a diff of the server-side changes.

## How it works

1. The Server AI Toolkit edits the document on the server and returns the updated document.
2. On the client, you pass the updated document to the AI Toolkit's `setSuggestions` method using the `compareDocuments` format.
3. The AI Toolkit compares the current editor document with the updated document and displays the differences as suggestions.
4. Users can accept or reject individual changes, or accept/reject all changes at once.

## Display the diff

After receiving the updated document from the Server AI Toolkit, use `setSuggestions` to show the changes:

```ts
import { getAiToolkit } from '@tiptap-pro/ai-toolkit'
import { Node } from '@tiptap/pm/model'

// Get the AI Toolkit instance from the editor
const toolkit = getAiToolkit(editor)

// `doc` is the updated document returned by the Server AI Toolkit.
// Convert it to a ProseMirror Node with the editor's schema.
const otherDoc = Node.fromJSON(editor.state.schema, doc)

// Display the diff
toolkit.setSuggestions([
  {
    format: 'compareDocuments',
    doc: otherDoc,
  },
])
```

<Callout title="Schema compatibility" variant="warning">
  The document returned by the Server AI Toolkit must be converted to a ProseMirror `Node` using the
  editor's schema. Use `Node.fromJSON(editor.state.schema, doc)` to ensure both documents share the
  same schema.
</Callout>

The editor will now display the differences between the current document and the server-edited version, with deletions highlighted in red and insertions in green.

## Style the diff

Add CSS to style the suggestions as a red/green diff:

```css
/* Highlight inserted text in green */
.tiptap-ai-suggestion,
.tiptap-ai-suggestion > * {
  background-color: oklch(87.1% 0.15 154.449);
}

/* Lighter background for change groups (sub-changes carry the stronger highlight) */
.tiptap-ai-suggestion.tiptap-ai-suggestion--change-group,
.tiptap-ai-suggestion.tiptap-ai-suggestion--change-group > *:not(.tiptap-ai-suggestion-sub-change) {
  background-color: oklch(0.962 0.044 156.743);
}

/* Highlight sub-changes within inline groups */
.tiptap-ai-suggestion-sub-change {
  background-color: oklch(87.1% 0.15 154.449);
}

/* Highlight deleted text in red */
.tiptap-ai-suggestion-diff,
.tiptap-ai-suggestion-diff > * {
  background-color: oklch(80.8% 0.114 19.571);
  color: oklch(0.396 0.141 25.723);
}

/* Lighter background for diff change groups (sub-changes carry the stronger highlight) */
.tiptap-ai-suggestion-diff.tiptap-ai-suggestion-diff--change-group,
.tiptap-ai-suggestion-diff.tiptap-ai-suggestion-diff--change-group
  > *:not(.tiptap-ai-suggestion-diff-sub-change) {
  background-color: oklch(0.936 0.032 17.717);
}

/* Highlight sub-changes within the replacement diff widget */
.tiptap-ai-suggestion-diff-sub-change {
  background-color: oklch(80.8% 0.114 19.571);
}

/* Render table row deletions correctly */
.tiptap-ai-suggestion-diff:has(tr) {
  display: contents;
}

.tiptap-ai-suggestion-diff:has(tr) td,
.tiptap-ai-suggestion-diff:has(tr) th {
  background-color: oklch(80.8% 0.114 19.571);
}
```

## Accept or reject changes

Once the diff is displayed, users can accept or reject changes using the suggestion methods:

```ts
const toolkit = getAiToolkit(editor)

// Accept all changes
toolkit.acceptAllSuggestions()

// Reject all changes
toolkit.rejectAllSuggestions()

// Or handle individual suggestions
const suggestions = toolkit.getSuggestions()
toolkit.acceptSuggestion(suggestions[0].id)
toolkit.rejectSuggestion(suggestions[1].id)
```

## Next steps

- Learn how to [style suggestions](/content-ai/capabilities/ai-toolkit/advanced-guides/style-suggestions) with custom CSS or React components
- See the full [setSuggestions API reference](/content-ai/capabilities/ai-toolkit/api-reference/display-suggestions#setsuggestions--addsuggestions)
- Explore the [Compare documents guide](/content-ai/capabilities/ai-toolkit/advanced-guides/compare-documents) for more advanced comparison options
