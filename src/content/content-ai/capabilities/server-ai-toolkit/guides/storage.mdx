---
title: Storage options
meta:
  title: Storage options | Tiptap Content AI
  description: Compare Tiptap Cloud storage and custom storage implementations for the Server AI Toolkit.
  category: Content AI
---

import { Callout } from '@/components/ui/Callout'

The Server AI Toolkit supports different storage backends for loading and saving documents. You can use the built-in Tiptap Cloud storage or implement a custom storage backend.

## Working with storage

First, define the external storage backend (in this example, Tiptap Cloud storage):

```typescript
import { getServerAiToolkit } from '@tiptap-pro/server-ai-toolkit'

const toolkit = getServerAiToolkit({
  schemaAwarenessData,
  storage: new TiptapCloudStorage(),
})
```

Then, use the `loadDocument` to load the document from external storage:

```typescript
// Load document from external storage into the Server AI Toolkit instance
await toolkit.loadDocument()
```

After editing the document, use the `saveDocument` to save the document to external storage:

```typescript
// Edit the document
toolkit.setJson({
  type: 'doc',
  content: [{ type: 'paragraph', content: [{ type: 'text', text: 'Updated content' }] }],
})

// Save document to external storage
await toolkit.saveDocument()
```

When you execute a tool, the Server AI Toolkit will automatically load and save the document to external storage, so you don't need to call `loadDocument` and `saveDocument` manually.

```typescript
// Execute a tool call
await toolkit.executeTool({
  toolName: 'tiptapEdit',
  // Tool call input, generated by the AI.
  input,
})
```

## Tiptap Cloud Storage

The built-in `TiptapCloudStorage` class integrates with Tiptap Cloud's REST API to load and save documents.

### Setup

```typescript
import { getServerAiToolkit, TiptapCloudStorage } from '@tiptap-pro/server-ai-toolkit'

const toolkit = getServerAiToolkit({
  schemaAwarenessData,
  storage: new TiptapCloudStorage({
    documentIdentifier: 'my-document',
    user: 'ai-user-1',
    appId: process.env.TIPTAP_CLOUD_APP_ID,
    apiSecret: process.env.REST_API_SECRET,
  }),
})

// Load document from Tiptap Cloud
await toolkit.loadDocument()

// Edit the document
toolkit.setJson({
  type: 'doc',
  content: [{ type: 'paragraph', content: [{ type: 'text', text: 'Updated content' }] }],
})

// Save document to Tiptap Cloud
await toolkit.saveDocument()
```

### Configuration

- `documentIdentifier` (`string`): The Tiptap Cloud document identifier
- `appId` (`string`): The Tiptap Cloud application ID
- `apiSecret` (`string`): The API secret for authentication (from Tiptap Cloud dashboard settings)

### Environment variables

Store your credentials as environment variables:

```sh
# .env
TIPTAP_CLOUD_APP_ID=your-app-id
REST_API_SECRET=your-rest-api-secret
```

Get your credentials from the [Tiptap Cloud dashboard](https://cloud.tiptap.dev/).

### Benefits

- No additional setup required
- Automatic error handling
- Built-in validation
- Works with Tiptap Collaboration for real-time sync

## Custom Storage

Implement the `ServerAiToolkitStorage` interface to use your own storage backend.

### Interface

```typescript
interface ServerAiToolkitStorage {
  getDocument: () => Promise<JsonNode>
  setDocument: (document: JsonNode) => Promise<void>
}
```

### Example: Database storage

```typescript
import { ServerAiToolkitStorage } from '@tiptap-pro/server-ai-toolkit'
import { db } from './database'

class DatabaseStorage implements ServerAiToolkitStorage {
  constructor(private documentId: string) {}

  async getDocument() {
    const doc = await db.documents.findUnique({
      where: { id: this.documentId },
    })
    return doc.content
  }

  async setDocument(document) {
    await db.documents.update({
      where: { id: this.documentId },
      data: { content: document },
    })
  }
}

// Use with Server AI Toolkit
const toolkit = getServerAiToolkit({
  schemaAwarenessData,
  storage: new DatabaseStorage('doc-123'),
})
```

### Example: File system storage

```typescript
import { ServerAiToolkitStorage } from '@tiptap-pro/server-ai-toolkit'
import { readFile, writeFile } from 'fs/promises'
import { join } from 'path'

class FileSystemStorage implements ServerAiToolkitStorage {
  constructor(private filePath: string) {}

  async getDocument() {
    const content = await readFile(this.filePath, 'utf-8')
    return JSON.parse(content)
  }

  async setDocument(document) {
    await writeFile(this.filePath, JSON.stringify(document, null, 2))
  }
}

// Use with Server AI Toolkit
const toolkit = getServerAiToolkit({
  schemaAwarenessData,
  storage: new FileSystemStorage('./documents/my-doc.json'),
})
```

## No storage

If you don't need persistence, you can omit the storage option. The toolkit will work with an in-memory document:

```typescript
const toolkit = getServerAiToolkit({
  schemaAwarenessData,
  document: {
    type: 'doc',
    content: [{ type: 'paragraph', content: [{ type: 'text', text: 'Initial content' }] }],
  },
})

// Edit the document
toolkit.setJson({
  type: 'doc',
  content: [{ type: 'paragraph', content: [{ type: 'text', text: 'Updated content' }] }],
})

// Get the document
const json = toolkit.getJson()
```

<Callout title="When to use no storage" variant="info">
  Use this approach for temporary documents, testing, or when you handle persistence separately.
</Callout>

## Comparison

| Feature          | Tiptap Cloud Storage | Custom Storage            | No Storage |
| ---------------- | -------------------- | ------------------------- | ---------- |
| Setup complexity | Low                  | Medium                    | None       |
| Real-time sync   | ✓                    | Depends on implementation | ✗          |
| Persistence      | ✓                    | ✓                         | ✗          |
| Custom backend   | ✗                    | ✓                         | ✗          |
| Error handling   | Built-in             | Manual                    | N/A        |

## Next steps

- Learn about [document persistence methods](/content-ai/capabilities/server-ai-toolkit/primitives/storage)
- Explore [configuration options](/content-ai/capabilities/server-ai-toolkit/configure)
- Build an [AI agent chatbot](/content-ai/capabilities/server-ai-toolkit/guides/ai-agent-chatbot)
