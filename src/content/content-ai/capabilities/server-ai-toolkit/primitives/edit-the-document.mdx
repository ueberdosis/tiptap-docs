---
title: Edit the document
meta:
  title: Edit the document | Tiptap Content AI
  description: Insert and replace content in JSON format on the server.
  category: Content AI
---

The Server AI Toolkit provides primitives to edit the document in JSON format.

## `setJson`

Replace the entire document with new JSON content.

### Parameters

- `json` (`JsonNode`): The new document content as Tiptap JSON

### Returns

`void`

### Example

```typescript
// Replace the entire document
toolkit.setJson({
  type: 'doc',
  content: [
    { type: 'heading', attrs: { level: 1 }, content: [{ type: 'text', text: 'New Document' }] },
    { type: 'paragraph', content: [{ type: 'text', text: 'Fresh content' }] },
  ],
})
```

## `insertJson`

Insert JSON content at a specific position in the document.

### Parameters

- `content` (`JsonNode | JsonNode[]`): The JSON content to insert
- `options?` (`InsertJsonOptions`): Options for the `insertJson` method
  - `position?` (`ServerAiToolkitInsertPosition`): Where to insert. Default: `'document'`

### Returns

`void`

### Example

```typescript
// Insert a paragraph at the document position
toolkit.insertJson({
  type: 'paragraph',
  content: [{ type: 'text', text: 'AI-generated content' }],
})

// Insert multiple nodes
toolkit.insertJson([
  { type: 'heading', attrs: { level: 2 }, content: [{ type: 'text', text: 'Section' }] },
  { type: 'paragraph', content: [{ type: 'text', text: 'Content' }] },
])

// The toolkit validates content against the schema before inserting
try {
  toolkit.insertJson({
    type: 'invalid-node',
    content: [],
  })
} catch (error) {
  console.error('Invalid content:', error)
  // Handle validation error
}
```

## `insertFragment`

Insert a ProseMirror fragment at a specific position in the document.

### Parameters

- `fragment` (`Fragment`): The ProseMirror fragment to insert
- `options?` (`InsertFragmentOptions`): Options for the `insertFragment` method
  - `position?` (`ServerAiToolkitInsertPosition`): Where to insert. Default: `'document'`

### Returns

`void`

### Example

```typescript
import { Fragment } from '@tiptap/pm/model'

// Create a fragment from JSON
const fragment = Fragment.fromJSON(toolkit.state.schema, [
  { type: 'paragraph', content: [{ type: 'text', text: 'Content' }] },
])

// Insert the fragment
toolkit.insertFragment(fragment)
```

## Insert Position

The `position` option determines where content is inserted. It accepts the following values:

- `'document'`: Replace the entire document with the new content (default)
- `'start'`: Insert at the start of the document
- `'end'`: Insert at the end of the document
- `{ from: number, to: number }`: Insert at a specific range

### Examples

```typescript
// Replace entire document
toolkit.insertJson(
  { type: 'paragraph', content: [{ type: 'text', text: 'New content' }] },
  { position: 'document' },
)

// Insert at start
toolkit.insertJson(
  { type: 'paragraph', content: [{ type: 'text', text: 'First paragraph' }] },
  { position: 'start' },
)

// Insert at end
toolkit.insertJson(
  { type: 'paragraph', content: [{ type: 'text', text: 'Last paragraph' }] },
  { position: 'end' },
)

// Insert at specific range
toolkit.insertJson(
  { type: 'paragraph', content: [{ type: 'text', text: 'Middle paragraph' }] },
  { position: { from: 10, to: 20 } },
)
```
